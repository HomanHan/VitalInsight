{"remainingRequest":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/babel-loader/lib/index.js!/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/liyaodong/Documents/VitalInsight/eladmin-web/src/store/modules/permission.js","dependencies":[{"path":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/src/store/modules/permission.js","mtime":1744855950676},{"path":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/babel.config.js","mtime":1744855950655},{"path":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/cache-loader/dist/cjs.js","mtime":1744860344598},{"path":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/babel-loader/lib/index.js","mtime":1744860345141},{"path":"/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/eslint-loader/index.js","mtime":1744860344682}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/liyaodong/Documents/VitalInsight/eladmin-web/node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadView = exports.filterAsyncRouter = exports.default = void 0;\nrequire(\"core-js/modules/web.dom.iterable\");\nvar _routers = require(\"@/router/routers\");\nvar _index = _interopRequireDefault(require(\"@/layout/index\"));\nvar _ParentView = _interopRequireDefault(require(\"@/components/ParentView\"));\nvar permission = {\n  state: {\n    routers: _routers.constantRouterMap,\n    addRouters: [],\n    sidebarRouters: []\n  },\n  mutations: {\n    SET_ROUTERS: function SET_ROUTERS(state, routers) {\n      state.addRouters = routers;\n      state.routers = _routers.constantRouterMap.concat(routers);\n    },\n    SET_SIDEBAR_ROUTERS: function SET_SIDEBAR_ROUTERS(state, routers) {\n      state.sidebarRouters = _routers.constantRouterMap.concat(routers);\n    }\n  },\n  actions: {\n    GenerateRoutes: function GenerateRoutes(_ref, asyncRouter) {\n      var commit = _ref.commit;\n      commit('SET_ROUTERS', asyncRouter);\n    },\n    SetSidebarRouters: function SetSidebarRouters(_ref2, sidebarRouter) {\n      var commit = _ref2.commit;\n      commit('SET_SIDEBAR_ROUTERS', sidebarRouter);\n    }\n  }\n};\nvar _filterAsyncRouter = exports.filterAsyncRouter = function filterAsyncRouter(routers) {\n  var lastRouter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  // 遍历后台传来的路由字符串，转换为组件对象\n  return routers.filter(function (router) {\n    if (type && router.children) {\n      router.children = filterChildren(router.children);\n    }\n    if (router.component) {\n      if (router.component === 'Layout') {\n        // Layout组件特殊处理\n        router.component = _index.default;\n      } else if (router.component === 'ParentView') {\n        router.component = _ParentView.default;\n      } else {\n        var component = router.component;\n        router.component = loadView(component);\n      }\n    }\n    if (router.children != null && router.children && router.children.length) {\n      router.children = _filterAsyncRouter(router.children, router, type);\n    } else {\n      delete router['children'];\n      delete router['redirect'];\n    }\n    return true;\n  });\n};\nfunction filterChildren(childrenMap) {\n  var lastRouter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var children = [];\n  childrenMap.forEach(function (el, index) {\n    if (el.children && el.children.length) {\n      if (el.component === 'ParentView') {\n        el.children.forEach(function (c) {\n          c.path = el.path + '/' + c.path;\n          if (c.children && c.children.length) {\n            children = children.concat(filterChildren(c.children, c));\n            return;\n          }\n          children.push(c);\n        });\n        return;\n      }\n    }\n    if (lastRouter) {\n      el.path = lastRouter.path + '/' + el.path;\n    }\n    children = children.concat(el);\n  });\n  return children;\n}\nvar loadView = exports.loadView = function loadView(view) {\n  return function (resolve) {\n    return require([\"@/views/\".concat(view)], resolve);\n  };\n};\nvar _default = exports.default = permission;",null]}